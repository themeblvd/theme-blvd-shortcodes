jQuery(document).ready(function(a){var b={preview:function(m){var p=m.data("type"),s="",h=m.find(".shortcode-preview"),n="",t=h.data("content"),q=h.data("raw"),o=h.data("clean"),d=0,r="",g="",k=false;if(q){s+="[raw]<br>"}if(p=="tabs"){var l=m.find('select[name="tabs[num]"]').val(),e=m.find('select[name="tabs[style]"]').val(),c=m.find('select[name="tabs[nav]"]').val();s+='[tabs style="'+e+'" nav="'+c+'"';for(var j=1;j<=l;j++){s+=" tab_"+j+'="Title #'+j+'"'}s+="]<br>";for(var j=1;j<=l;j++){s+="[tab_"+j+"]Tab "+j+"...[/tab_"+j+"]<br>"}s+="[/tabs]"}else{if(p=="accordion"){var l=m.find('select[name="accordion[num]"]').val();s+="[accordion]<br>";for(var j=1;j<=l;j++){s+='[toggle title="Toggle #'+j+'"]Content of toggle #'+j+".[/toggle]<br>"}s+="[/accordion]"}else{s+="["+p;m.find(".of-input, .of-radio-img-radio, .tb-color-picker").each(function(){if(a(this).hasClass("of-radio-img-radio")&&!a(this).prop("checked")){return}r=a(this).attr("id");g=a(this).val();if(r=="custom_include_bg"||r=="custom_include_border"){return}if(p=="button"&&r=="color"&&g=="custom"){k=true}if(a(this).hasClass("of-radio-img-radio")){r=r.replace(new RegExp("_"+g,"g"),"")}if(g&&g!=="0"){if((p=="icon"||g!="none")&&r!="sc_content"){s+=" "+r+'="'+g+'"'}if(r=="sc_content"){n=g}}if(r!="sc_content"){d++}});if(k){var f={};m.find(".section-button").find("input.color-picker, .checkbox").each(function(){var i=a(this);r=i.attr("id");r=r.replace("custom_","");if(i.hasClass("checkbox")){if(i.prop("checked")){g="true"}else{g="false"}}else{g=i.val()}f[r]=g});for(var r in f){if(f.hasOwnProperty(r)){if(r=="bg"||r=="border"){if(r=="bg"&&f.include_bg=="true"){s+=" "+r+'="'+f[r]+'"'}else{if(r=="border"&&f.include_border=="true"){s+=" "+r+'="'+f[r]+'"'}}}else{s+=" "+r+'="'+f[r]+'"'}}}}s+="]";if(t){n=n.replace(/</g,"&lt;");n=n.replace(/>/g,"&gt;");n=n.replace(/(\r\n|\n|\r)/gm,"<br>");if((q||o)&&n){s+="<br>"+n+"<br>"}else{s+=n}s+="[/"+p+"]"}}}if(q){s+="<br>[/raw]"}h.attr("data-type",p).html(s)},preview_columns:function(h){var e=h.find(".shortcode-preview"),k="[raw]<br>",j=false;if(h.find("#section-wpautop input").is(":checked")){j=true}if(typeof themeblvd_column_widths!="undefined"){var d=h.find(".column-width-input").val(),d=d.split("-");for(var f=0;f<d.length;f++){k+='[column size="'+d[f]+'"';if(j){k+=' wpautop="true"'}k+="]<br>";k+="Column "+(f+1)+"...<br>";k+="[/column]";if(f<d.length-1){k+="<br>"}}}else{var g=h.find(".column-num").val(),d=h.find(".column-width-"+g+" select").val(),d=d.split("-"),c="",l;for(var f=0;f<g;f++){c="";switch(d[f]){case"grid_3":l="1/4";break;case"grid_4":l="1/3";break;case"grid_6":l="1/2";break;case"grid_8":l="2/3";break;case"grid_9":l="3/4";break;case"grid_fifth_1":l="1/5";break;case"grid_fifth_2":l="2/5";break;case"grid_fifth_3":l="3/5";break;case"grid_fifth_4":l="4/5";break;case"grid_tenth_3":l="3/10";break;case"grid_tenth_7":l="7/10";break}c+='[column size="'+l+'"';if(j){c+=' wpautop="true"'}if(f==g-1){c+=" last"}c+="]<br>";c+="Column "+(f+1)+"...<br>";c+="[/column]";if(f<g-1){c+="<br>"}k+=c}}k+="<br>[/raw]";e.html(k)},columns_wpauto:function(){var d=a(this),e=a(this).closest(".shortcode-options").find(".shortcode-preview"),c=e.html();c=c.replace(/ wpautop="true"/g,"");if(d.is(":checked")){c=c.replace(/"]/g,'" wpautop="true"]');c=c.replace(/last]/g,' wpautop="true" last]')}e.html(c)},tooltip_on:function(f){var d=f.closest(".tooltip-wrap"),c=f.data("tooltip-text"),e='<div class="tooltip top"> 							   <div class="tooltip-inner"> 							     text 							   </div> 							   <div class="tooltip-arrow"></div> 							 </div>';e=e.replace("text",c);d.append(e);var g=d.find(".tooltip");g.css({top:"-"+g.height()+"px",left:"50%","margin-left":"-"+g.width()/2+"px"}).addClass("fade in")},tooltip_off:function(c){c.closest(".tooltip-wrap").find(".tooltip").remove()}};a(".tb-insert-shortcode").on("click",function(){a("#tb-shortcode-generator").show();a("body").addClass("themeblvd-stop-scroll");return false});a("#tb-shortcode-generator .media-modal-close, #tb-shortcode-generator .media-modal-backdrop").on("click",function(){a("#tb-shortcode-generator").hide();a("body").removeClass("themeblvd-stop-scroll");return false});a("#tb-shortcode-generator").themeblvd("init");a("#tb-shortcode-generator").themeblvd("options","bind");a("#tb-shortcode-generator").themeblvd("options","setup");a("#tb-shortcode-generator").themeblvd("options","column-widths");a("#tb-shortcode-generator .media-menu-item").on("click",function(){var e=a(this),h=e.data("id"),d=e.text().trim(),c=true,f=e.closest("#tb-shortcode-generator"),g="";f.find(".media-menu-item").removeClass("active");e.addClass("active");f.find(".media-frame-title h1").text(d);f.find(".media-frame").addClass("hide-router");f.find(".media-frame-router").each(function(){var i=a(this);if(i.data("group")==h){i.show();c=false}else{i.hide()}});if(!c){f.find(".media-frame").removeClass("hide-router")}f.find(".tb-group").removeClass("tb-group-show").addClass("tb-group-hide");f.find("#tb-group-"+h).addClass("tb-group-show").removeClass("tb-group-hide");f.find("#tb-group-"+h+" .shortcode-options").each(function(){if(!a(this).hasClass("hide")){g=a(this).data("type")}});a("#tb-shortcode-to-editor").data("insert",g);return false});a("#tb-shortcode-generator .media-frame-router").hide().closest(".media-frame").addClass("hide-router");a("#tb-shortcode-generator .tb-tab-menu-item").on("click",function(){var d=a(this),e=d.closest(".media-frame-router").data("group"),c=d.data("sub-group");modal=d.closest("#tb-shortcode-generator");d.closest(".media-frame-router").find(".tb-tab-menu-item").removeClass("active");d.addClass("active");modal.find("#tb-group-"+e+" .shortcode-options").hide().addClass("hide");modal.find("#tb-group-"+e+" .shortcode-options-"+c).removeClass("hide").show();a("#tb-shortcode-to-editor").data("insert",c);return false});a("#tb-shortcode-generator .of-input").on("change.generator propertychange.generator keyup.generator input.generator paste.generator",function(){b.preview(a(this).closest(".shortcode-options"))});a("#tb-shortcode-generator .of-radio-img-img").on("click.generator",function(){b.preview(a(this).closest(".shortcode-options"))});a("#tb-shortcode-generator .shortcode-options-column select").on("change.generator",function(){b.preview(a(this).closest(".shortcode-options"))});a("#tb-shortcode-generator #wpautop").off("change.generator");a("#tb-shortcode-generator .shortcode-options-column .section-columns select").off("change.generator");if(a.isFunction(a.fn.wpColorPicker)){a("#tb-shortcode-generator .color-picker, #tb-shortcode-generator .tb-color-picker").wpColorPicker({change:function(){b.preview(a(this).closest(".shortcode-options"))},clear:function(){b.preview(a(this).closest(".shortcode-options"))}});a("#tb-shortcode-generator .wp-color-result").on("click",function(){b.preview(a(this).closest(".shortcode-options"))})}a("#tb-shortcode-generator .icon-browser-content").hide();a("#tb-shortcode-generator .icon-browser-title a").on("click",function(){var c=a(this).closest(".icon-browser").find(".icon-browser-content");if(c.hasClass("open")){a(this).find(".fa").removeClass("fa-rotate-180");c.hide().removeClass("open")}else{a(this).find(".fa").addClass("fa-rotate-180");c.show().addClass("open")}return false});a("#tb-shortcode-generator .icon-browser .select-icon").on("mouseenter",function(){b.tooltip_on(a(this))});a("#tb-shortcode-generator .icon-browser .select-icon").on("mouseleave",function(){b.tooltip_off(a(this))});a("#tb-shortcode-generator .icon-browser .select-icon").on("click",function(){a(this).closest(".icon-browser").find(".select-icon").removeClass("selected");a(this).addClass("selected");a('#tb-shortcode-generator input[name="vector_icon[icon]"]').val(a(this).data("id"));b.preview(a(this).closest(".shortcode-options"));return false});a("#tb-shortcode-generator .color-browser .select-color").on("click",function(){var c=a(this);c.closest(".color-browser").find(".select-color-wrap").removeClass("selected");c.closest(".select-color-wrap").addClass("selected");a('#tb-shortcode-generator input[name="button[color]"]').val(c.data("color"));if(c.data("color")=="custom"){c.closest(".options-wrap").find(".section-button").show()}else{c.closest(".options-wrap").find(".section-button").hide()}b.preview(c.closest(".shortcode-options"));return false});a("#tb-shortcode-generator .color-browser .select-color").on("mouseenter",function(){b.tooltip_on(a(this))});a("#tb-shortcode-generator .color-browser .select-color").on("mouseleave",function(){b.tooltip_off(a(this))});if(typeof themeblvd_column_widths!="undefined"){a("#tb-shortcode-generator .column-width-input").on("themeblvd_update_columns",function(){b.preview_columns(a(this).closest(".shortcode-options"))})}else{a("#tb-shortcode-generator").find(".column-num, .column-width select").on("change",function(){b.preview_columns(a(this).closest(".shortcode-options"))});a("#tb-shortcode-generator .columns").each(function(){a(this).find(".column-num option:first-child").remove();a(this).find(".column-width-1").remove()})}a("#tb-shortcode-generator #wpautop").on("change",b.columns_wpauto);a("#tb-shortcode-to-editor").on("click",function(){var c=a(this).closest("#tb-shortcode-generator"),d=a(this).data("insert"),e=c.find(".shortcode-preview-"+d).html(),f=true;if(a("#wp-content-wrap").hasClass("tmce-active")){f=false}e=e.replace(/<hr>/gi,"");if(d=="icon_list"){e=a("<div/>").html(e).text();e=e.replace(/<ul>/gi,"\n<ul>\n");e=e.replace(/<\/li>/gi,"</li>\n");e=e.replace(/<\/ul>/gi,"</ul>\n")}if(f){e=e.replace(/<br>/gi,"\n")}window.send_to_editor(e);a("body").removeClass("themeblvd-stop-scroll");c.hide();return false})});