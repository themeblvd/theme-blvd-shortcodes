jQuery(document).ready(function(e){var o={preview:function(o){var t=o.data("type"),r="",s=o.find(".shortcode-preview"),n="",i=s.data("content"),c=s.data("raw"),a=s.data("clean"),d=0,l="",h="",p=!1;if(c&&(r+="[raw]<br>"),"tabs"==t){var u=o.find('select[name="tabs[num]"]').val(),b=o.find('select[name="tabs[style]"]').val(),f=o.find('select[name="tabs[nav]"]').val();r+='[tabs style="'+b+'" nav="'+f+'"';for(var m=1;u>=m;m++)r+=" tab_"+m+'="Title #'+m+'"';r+="]<br>";for(var m=1;u>=m;m++)r+="[tab_"+m+"]Tab "+m+"...[/tab_"+m+"]<br>";r+="[/tabs]"}else if("accordion"==t){var u=o.find('select[name="accordion[num]"]').val();r+="[accordion]<br>";for(var m=1;u>=m;m++)r+='[toggle title="Toggle #'+m+'"]Content of toggle #'+m+".[/toggle]<br>";r+="[/accordion]"}else{if(r+="["+t,o.find(".of-input, .of-radio-img-radio, .tb-color-picker").each(function(){(!e(this).hasClass("of-radio-img-radio")||e(this).prop("checked"))&&(l=e(this).attr("id"),h=e(this).val(),"custom_include_bg"!=l&&"custom_include_border"!=l&&("excerpt-option"==l&&(l="excerpt"),"button"==t&&"color"==l&&"custom"==h&&(p=!0),e(this).hasClass("of-radio-img-radio")&&(l=l.replace(new RegExp("_"+h,"g"),"")),h&&"0"!==h&&("sc_content"!=l&&(r+=" "+l+'="'+h+'"'),"sc_content"==l&&(n=h)),"sc_content"!=l&&d++))}),p){var g={};o.find(".section-button").find("input.color-picker, .checkbox").each(function(){var o=e(this);l=o.attr("id"),l=l.replace("custom_",""),h=o.hasClass("checkbox")?o.prop("checked")?"true":"false":o.val(),g[l]=h});for(var l in g)g.hasOwnProperty(l)&&("bg"==l||"border"==l?"bg"==l&&"true"==g.include_bg?r+=" "+l+'="'+g[l]+'"':"border"==l&&"true"==g.include_border&&(r+=" "+l+'="'+g[l]+'"'):r+=" "+l+'="'+g[l]+'"')}r+="]",i&&(n=n.replace(/</g,"&lt;"),n=n.replace(/>/g,"&gt;"),n=n.replace(/(\r\n|\n|\r)/gm,"<br>"),r+=(c||a)&&n?"<br>"+n+"<br>":n,r+="[/"+t+"]")}c&&(r+="<br>[/raw]"),s.attr("data-type",t).html(r)},preview_columns:function(e){var o=e.find(".shortcode-preview"),t="[raw]<br>",r=!1;if(e.find("#section-wpautop input").is(":checked")&&(r=!0),"undefined"!=typeof themeblvd_column_widths)for(var s=e.find(".column-width-input").val(),s=s.split("-"),n=0;n<s.length;n++)t+='[column size="'+s[n]+'"',r&&(t+=' wpautop="true"'),t+="]<br>",t+="Column "+(n+1)+"...<br>",t+="[/column]",n<s.length-1&&(t+="<br>");else for(var i,c=e.find(".column-num").val(),s=e.find(".column-width-"+c+" select").val(),s=s.split("-"),a="",n=0;c>n;n++){switch(a="",s[n]){case"grid_3":i="1/4";break;case"grid_4":i="1/3";break;case"grid_6":i="1/2";break;case"grid_8":i="2/3";break;case"grid_9":i="3/4";break;case"grid_fifth_1":i="1/5";break;case"grid_fifth_2":i="2/5";break;case"grid_fifth_3":i="3/5";break;case"grid_fifth_4":i="4/5";break;case"grid_tenth_3":i="3/10";break;case"grid_tenth_7":i="7/10"}a+='[column size="'+i+'"',r&&(a+=' wpautop="true"'),n==c-1&&(a+=" last"),a+="]<br>",a+="Column "+(n+1)+"...<br>",a+="[/column]",c-1>n&&(a+="<br>"),t+=a}t+="<br>[/raw]",o.html(t)},columns_wpauto:function(){var o=e(this),t=e(this).closest(".shortcode-options").find(".shortcode-preview"),r=t.html();r=r.replace(/ wpautop="true"/g,""),o.is(":checked")&&(r=r.replace(/"]/g,'" wpautop="true"]'),r=r.replace(/last]/g,' wpautop="true" last]')),t.html(r)},tooltip_on:function(e){var o=e.closest(".tooltip-wrap"),t=e.data("tooltip-text"),r='<div class="tooltip top"> 							   <div class="tooltip-inner"> 							     text 							   </div> 							   <div class="tooltip-arrow"></div> 							 </div>';r=r.replace("text",t),o.append(r);var s=o.find(".tooltip");s.css({top:"-"+s.height()+"px",left:"50%","margin-left":"-"+s.width()/2+"px"}).addClass("fade in")},tooltip_off:function(e){e.closest(".tooltip-wrap").find(".tooltip").remove()}};e(".tb-insert-shortcode").on("click",function(){return e("#tb-shortcode-generator").show(),e("body").addClass("themeblvd-stop-scroll"),!1}),e("#tb-shortcode-generator .media-modal-close, #tb-shortcode-generator .media-modal-backdrop").on("click",function(){return e("#tb-shortcode-generator").hide(),e("body").removeClass("themeblvd-stop-scroll"),!1}),e("#tb-shortcode-generator").themeblvd("init"),e("#tb-shortcode-generator").themeblvd("options","bind"),e("#tb-shortcode-generator").themeblvd("options","setup"),e("#tb-shortcode-generator").themeblvd("options","column-widths"),e("#tb-shortcode-generator .media-menu-item").on("click",function(){var o=e(this),t=o.data("id"),r=o.text().trim(),s=!0,n=o.closest("#tb-shortcode-generator"),i="";return n.find(".media-menu-item").removeClass("active"),o.addClass("active"),n.find(".media-frame-title h1").text(r),n.find(".media-frame").addClass("hide-router"),n.find(".media-frame-router").each(function(){var o=e(this);o.data("group")==t?(o.show(),s=!1):o.hide()}),s||n.find(".media-frame").removeClass("hide-router"),n.find(".tb-group").removeClass("tb-group-show").addClass("tb-group-hide"),n.find("#tb-group-"+t).addClass("tb-group-show").removeClass("tb-group-hide"),n.find("#tb-group-"+t+" .shortcode-options").each(function(){e(this).hasClass("hide")||(i=e(this).data("type"))}),e("#tb-shortcode-to-editor").data("insert",i),!1}),e("#tb-shortcode-generator .media-frame-router").hide().closest(".media-frame").addClass("hide-router"),e("#tb-shortcode-generator .tb-tab-menu-item").on("click",function(){var o=e(this),t=o.closest(".media-frame-router").data("group"),r=o.data("sub-group");return modal=o.closest("#tb-shortcode-generator"),o.closest(".media-frame-router").find(".tb-tab-menu-item").removeClass("active"),o.addClass("active"),modal.find("#tb-group-"+t+" .shortcode-options").hide().addClass("hide"),modal.find("#tb-group-"+t+" .shortcode-options-"+r).removeClass("hide").show(),e("#tb-shortcode-to-editor").data("insert",r),!1}),e("#tb-shortcode-generator .of-input").on("change.generator propertychange.generator keyup.generator input.generator paste.generator",function(){o.preview(e(this).closest(".shortcode-options"))}),e("#tb-shortcode-generator .of-radio-img-img").on("click.generator",function(){o.preview(e(this).closest(".shortcode-options"))}),e("#tb-shortcode-generator .shortcode-options-column select").on("change.generator",function(){o.preview(e(this).closest(".shortcode-options"))}),e("#tb-shortcode-generator #wpautop").off("change.generator"),e("#tb-shortcode-generator .shortcode-options-column .section-columns select").off("change.generator"),e.isFunction(e.fn.wpColorPicker)&&(e("#tb-shortcode-generator .color-picker, #tb-shortcode-generator .tb-color-picker").wpColorPicker({change:function(){o.preview(e(this).closest(".shortcode-options"))},clear:function(){o.preview(e(this).closest(".shortcode-options"))}}),e("#tb-shortcode-generator .wp-color-result").on("click",function(){o.preview(e(this).closest(".shortcode-options"))})),e("#tb-shortcode-generator .icon-browser-content").hide(),e("#tb-shortcode-generator .icon-browser-title a").on("click",function(){var o=e(this).closest(".icon-browser").find(".icon-browser-content");return o.hasClass("open")?(e(this).find(".fa").removeClass("fa-rotate-180"),o.hide().removeClass("open")):(e(this).find(".fa").addClass("fa-rotate-180"),o.show().addClass("open")),!1}),e("#tb-shortcode-generator .icon-browser .select-icon").on("mouseenter",function(){o.tooltip_on(e(this))}),e("#tb-shortcode-generator .icon-browser .select-icon").on("mouseleave",function(){o.tooltip_off(e(this))}),e("#tb-shortcode-generator .icon-browser .select-icon").on("click",function(){return e(this).closest(".icon-browser").find(".select-icon").removeClass("selected"),e(this).addClass("selected"),e('#tb-shortcode-generator input[name="vector_icon[icon]"]').val(e(this).data("id")),o.preview(e(this).closest(".shortcode-options")),!1}),e("#tb-shortcode-generator .color-browser .select-color").on("click",function(){var t=e(this);return t.closest(".color-browser").find(".select-color-wrap").removeClass("selected"),t.closest(".select-color-wrap").addClass("selected"),e('#tb-shortcode-generator input[name="button[color]"]').val(t.data("color")),"custom"==t.data("color")?t.closest(".options-wrap").find(".section-button").show():t.closest(".options-wrap").find(".section-button").hide(),o.preview(t.closest(".shortcode-options")),!1}),e("#tb-shortcode-generator .color-browser .select-color").on("mouseenter",function(){o.tooltip_on(e(this))}),e("#tb-shortcode-generator .color-browser .select-color").on("mouseleave",function(){o.tooltip_off(e(this))}),"undefined"!=typeof themeblvd_column_widths?e("#tb-shortcode-generator .column-width-input").on("themeblvd_update_columns",function(){o.preview_columns(e(this).closest(".shortcode-options"))}):(e("#tb-shortcode-generator").find(".column-num, .column-width select").on("change",function(){o.preview_columns(e(this).closest(".shortcode-options"))}),e("#tb-shortcode-generator .columns").each(function(){e(this).find(".column-num option:first-child").remove(),e(this).find(".column-width-1").remove()})),e("#tb-shortcode-generator #wpautop").on("change",o.columns_wpauto),e("#tb-shortcode-to-editor").on("click",function(){var o=e(this).closest("#tb-shortcode-generator"),t=e(this).data("insert"),r=o.find(".shortcode-preview-"+t).html(),s=!0;return e("#wp-content-wrap").hasClass("tmce-active")&&(s=!1),r=r.replace(/<hr>/gi,""),"icon_list"==t&&(r=e("<div/>").html(r).text(),r=r.replace(/<ul>/gi,"\n<ul>\n"),r=r.replace(/<\/li>/gi,"</li>\n"),r=r.replace(/<\/ul>/gi,"</ul>\n")),s&&(r=r.replace(/<br>/gi,"\n")),window.send_to_editor(r),e("body").removeClass("themeblvd-stop-scroll"),o.hide(),!1})});